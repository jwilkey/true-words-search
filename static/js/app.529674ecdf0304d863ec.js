webpackJsonp([1],{"61ID":function(e,t){},Lhb7:function(e,t){},NHnr:function(e,t,s){"use strict";function n(e){s("61ID")}function r(e){return e.toLowerCase()}function a(e){s("byR0")}function i(e){s("ffal")}function c(e){s("Lhb7")}function o(e){s("oQxR")}Object.defineProperty(t,"__esModule",{value:!0});var l=s("7+uW"),u={name:"app"},f=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"theme-back",attrs:{id:"app"}},[s("router-view")],1)},h=[],d={render:f,staticRenderFns:h},v=d,p=s("VU/8"),m=n,_=p(u,v,!1,m,null,null),x=_.exports,C=s("/ocq"),y=s("mtWM"),g=s.n(y),R="https://true-words-server.herokuapp.com",w={headers:{"Content-Type":"application/json","x-truewords-id":window.twid}},b={fetchCrossReferences:function(e){return g.a.post(R+"/cross-reference",{text:e},w).then(function(e){return e.data})},fetchTexts:function(e){return g.a.get(R+"/texts/"+e.join(","),w).then(function(e){return e.data.response.search.result.passages})},search:function(e){return g.a.get(R+"/search/"+e,w).then(function(e){return e.data})}},E=s("//Fk"),S=s.n(E),T={},k={fetchSynonyms:function(e){if(Array.isArray(T[e]))return S.a.resolve(T[e]);var t="https://thesaurus.altervista.org/thesaurus/v1?key=CQMMQFvjuOzTzfUzQCrz&language=en_US&output=json&word="+e;return g.a.get(t).then(function(t){var s=t.data.response.map(function(e){return e.list.synonyms});return T[e]=[],s.reduce(function(t,s){s.split("|").forEach(function(t){T[e].push(t.toLowerCase().replace(" (similar term)",""))})},[]),T[e]})}},$={data:function(){return{query:"",fetchedQuery:"",filter:"",results:void 0,synonyms:void 0,synResults:void 0}},computed:{filteredResults:function(){var e=this;return this.filter?this.results.filter(function(t){return r(t.verse_text).includes(r(e.filter))}):this.results},filteredSynResults:function(){var e=this;return this.filter?this.synResults.filter(function(t){return r(t.verse_text).includes(r(e.filter))}):this.synResults}},methods:{highlightQuery:function(e){var t=new RegExp("("+this.fetchedQuery+")","gi"),s=new RegExp("("+this.filter+")","gi");return(this.filter?e.replace(s,'<span class="back-blue">$1</span>'):e).replace(t,'<span class="back-orange">$1</span>')},highlightSyns:function(e){var t="("+this.synonyms.join("|")+")",s=new RegExp(t,"gi"),n=new RegExp("("+this.filter+")","gi");return(this.filter?e.replace(n,'<span class="back-blue">$1</span>'):e).replace(s,'<span class="back-red">$1</span>')},search:function(){this.results=void 0,this.synonyms=void 0,this.synResults=void 0;var e=this;b.search(this.query).then(function(t){e.fetchedQuery=e.query,e.results=t[1]}),k.fetchSynonyms(this.query).then(function(t){e.synonyms=t.filter(function(e){return!e.includes("antonym")&&e.length>2}),b.search(e.synonyms.join("|")).then(function(t){e.synResults=t[1]})})}}},Q=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"search flex-column"},[s("div",{staticClass:"search-form flex-column",class:{"flex-center":!e.results}},[s("form",{staticClass:"theme-mid shadow flex-row",on:{submit:function(t){t.preventDefault(),e.search(t)}}},[s("div",{staticClass:"flex-row flex-one align-center"},[e._m(0),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.query,expression:"query"}],staticClass:"hi-bottom flex-one",attrs:{name:"search",keyup:e.search,placeholder:"search",autofocus:""},domProps:{value:e.query},on:{input:function(t){t.target.composing||(e.query=t.target.value)}}})]),e._v(" "),e.results?s("div",{staticClass:"filter flex-row flex-one align-center"},[e._m(1),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.filter,expression:"filter"}],staticClass:"hi-bottom flex-one",attrs:{name:"filter",placeholder:"filter"},domProps:{value:e.filter},on:{input:function(t){t.target.composing||(e.filter=t.target.value)}}})]):e._e()])]),e._v(" "),e.results?s("div",{staticClass:"results flex-one flex-row"},[s("div",{staticClass:"flex-one substance"},[s("p",{staticClass:"title callout-light shadow"},[e._v(e._s(e.results.length)+" verses")]),e._v(" "),e._l(e.filteredResults,function(t){return s("div",{staticClass:"verse theme-mid shadow"},[s("span",{staticClass:"reference callout-light alt"},[e._v(e._s(t.book_name)+" "+e._s(t.chapter_id)+":"+e._s(t.verse_id))]),e._v(" "),s("span",{staticClass:"verse-text",domProps:{innerHTML:e._s(e.highlightQuery(t.verse_text))}})])})],2),e._v(" "),e.synResults?s("div",{staticClass:"flex-one substance"},[s("p",{staticClass:"title callout-light shadow"},[e._v(e._s(e.synonyms.length)+" synonyms, "+e._s(e.synResults.length)+" verses")]),e._v(" "),e._l(e.filteredSynResults,function(t){return s("div",{staticClass:"verse theme-mid shadow"},[s("span",{staticClass:"reference callout-light alt"},[e._v(e._s(t.book_name)+" "+e._s(t.chapter_id)+":"+e._s(t.verse_id))]),e._v(" "),s("span",{staticClass:"verse-text",domProps:{innerHTML:e._s(e.highlightSyns(t.verse_text))}})])})],2):e._e()]):e._e()])},j=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("button",{staticClass:"callout-light",attrs:{type:"submit"}},[s("i",{staticClass:"fa fa-search"})])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("label",{staticClass:"muted",attrs:{for:"filter"}},[s("i",{staticClass:"fa fa-filter blue"})])}],q={render:Q,staticRenderFns:j},F=q,L=s("VU/8"),M=a,N=L($,F,!1,M,null,null),O=N.exports,U=s("Dd8w"),D=s.n(U),P=s("NYxO"),H={name:"TextDump",data:function(){return{text:""}},methods:D()({},Object(P.b)(["setCrossReferences"]),{update:function(e){this.text=e},fetchCrossReferences:function(){var e=this;b.fetchCrossReferences(this.text).then(function(t){e.setCrossReferences(t)})}})},V=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"flex-column text-dump"},[s("div",{staticClass:"text-input theme-mid flex-one shadow",attrs:{contenteditable:"true"},on:{input:function(t){e.update(t.target.innerText)}}}),e._v(" "),s("button",{staticClass:"callout-light shadow-long",on:{click:e.fetchCrossReferences}},[e._v("submit")])])},z=[],A={render:V,staticRenderFns:z},I=A,W=s("VU/8"),J=i,Y=W(H,I,!1,J,"data-v-30cd58f2",null),B=Y.exports,G=s("gRE1"),K=s.n(G),X={name:"CrossReferences",data:function(){return{verses:[]}},computed:D()({},Object(P.c)(["crossReferences"])),watch:{crossReferences:function(){var e=this,t=[];K()(this.crossReferences).forEach(function(e){t=t.concat(e)}),b.fetchTexts(t).then(function(t){e.verses=t})}},methods:{formatted:function(e){return e},verseText:function(e){if(this.verses&&this.verses.length){var t=e.split("-"),s=this.verses.find(function(e){return e.start_verse_id.includes(t[0])&&(2!==t.length||e.end_verse_id.includes(t[1]))});return s?s.text:void 0}}}},Z=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"cross-references"},e._l(e.crossReferences,function(t,n){return s("div",{staticClass:"hi-bottom topic-group theme-mid"},[s("p",{staticClass:"topic callout-light"},[e._v(e._s(n))]),e._v(" "),e._l(t,function(t){return s("div",{staticClass:"verse hi-bottom"},[s("p",{staticClass:"verse-ref"},[e._v(e._s(e.formatted(t[0])))]),e._v(" "),s("transition",{attrs:{name:"fade"}},[s("p",{staticClass:"verse-text",domProps:{innerHTML:e._s(e.verseText(t[0]))}})])],1)})],2)}))},ee=[],te={render:Z,staticRenderFns:ee},se=te,ne=s("VU/8"),re=c,ae=ne(X,se,!1,re,"data-v-105c0d1c",null),ie=ae.exports,ce={name:"TextCrossReference",components:{TextDump:B,CrossReferences:ie}},oe=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"vfull flex-row"},[s("text-dump",{staticClass:"flex-one"}),e._v(" "),s("cross-references",{staticClass:"theme-mid shadow"})],1)},le=[],ue={render:oe,staticRenderFns:le},fe=ue,he=s("VU/8"),de=o,ve=he(ce,fe,!1,de,"data-v-9e63360e",null),pe=ve.exports;l.a.use(C.a);var me=new C.a({routes:[{path:"/",name:"Search",component:O},{path:"/cross-reference",name:"TextCrossReference",component:pe}]});l.a.use(P.a);var _e={crossReferences:{}},xe={crossReferences:function(e){return e.crossReferences}},Ce={setCrossReferences:function(e,t){(0,e.commit)("SET_CROSS_REFERENCES",t)}},ye={SET_CROSS_REFERENCES:function(e,t){e.crossReferences=t}},ge=new P.a.Store({state:_e,getters:xe,mutations:ye,actions:Ce});l.a.config.productionTip=!1,new l.a({el:"#app",store:ge,router:me,template:"<App/>",components:{App:x}})},byR0:function(e,t){},ffal:function(e,t){},oQxR:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.529674ecdf0304d863ec.js.map