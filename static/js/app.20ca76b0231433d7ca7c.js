webpackJsonp([1],{"61ID":function(e,t){},DbfK:function(e,t){},NHnr:function(e,t,s){"use strict";function n(e){s("61ID")}function r(e){return e.toLowerCase()}function a(e){s("v0mG")}function i(e){s("ffal")}function o(e){s("DbfK"),s("v6p1")}function c(e){s("oQxR")}Object.defineProperty(t,"__esModule",{value:!0});var l=s("7+uW"),u={name:"app"},f=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"theme-back",attrs:{id:"app"}},[s("router-view")],1)},d=[],h={render:f,staticRenderFns:d},v=h,m=s("VU/8"),p=n,_=m(u,v,!1,p,null,null),g=_.exports,x=s("/ocq"),y=s("mtWM"),C=s.n(y),R="https://true-words-server.herokuapp.com",b={headers:{"Content-Type":"application/json","x-truewords-id":window.twid}},w={fetchCrossReferences:function(e){return C.a.post(R+"/cross-reference",{text:e},b).then(function(e){return e.data})},fetchTexts:function(e){return C.a.get(R+"/texts/"+e.join(","),b).then(function(e){return e.data.response.search.result.passages})},search:function(e){return C.a.get(R+"/search/"+e,b).then(function(e){return e.data})}},E=s("//Fk"),S=s.n(E),T={},k={fetchSynonyms:function(e){if(Array.isArray(T[e]))return S.a.resolve(T[e]);var t="https://thesaurus.altervista.org/thesaurus/v1?key=CQMMQFvjuOzTzfUzQCrz&language=en_US&output=json&word="+e;return C.a.get(t).then(function(t){var s=t.data.response.map(function(e){return e.list.synonyms});return T[e]=[],s.reduce(function(t,s){s.split("|").forEach(function(t){T[e].push(t.toLowerCase().replace(" (similar term)",""))})},[]),T[e]})}},$={data:function(){return{query:"",fetchedQuery:"",loading:!1,loadingSynonyms:!1,filter:"",results:void 0,synonyms:void 0,synResults:void 0}},computed:{filteredResults:function(){var e=this;return this.filter?this.results.filter(function(t){return r(t.verse_text).includes(r(e.filter))}):this.results},filteredSynResults:function(){var e=this;return this.filter?this.synResults.filter(function(t){return r(t.verse_text).includes(r(e.filter))}):this.synResults}},methods:{highlightQuery:function(e){var t=new RegExp("("+this.fetchedQuery+")","gi"),s=new RegExp("("+this.filter+")","gi");return(this.filter?e.replace(s,'<span class="back-blue">$1</span>'):e).replace(t,'<span class="back-orange">$1</span>')},highlightSyns:function(e){var t="("+this.synonyms.join("|")+")",s=new RegExp(t,"gi"),n=new RegExp("("+this.filter+")","gi");return(this.filter?e.replace(n,'<span class="back-blue">$1</span>'):e).replace(s,'<span class="back-red">$1</span>')},search:function(){this.loading=!0,this.loadingSynonyms=!0;var e=this;w.search(this.query).then(function(t){e.fetchedQuery=e.query,e.results=t[1],e.loading=!1}).catch(function(t){e.loading=!1}),k.fetchSynonyms(this.query).then(function(t){e.synonyms=t.filter(function(e){return!e.includes("antonym")&&e.length>2}),w.search(e.synonyms.join("|")).then(function(t){e.synResults=t[1],e.loadingSynonyms=!1})}).catch(function(t){e.loadingSynonyms=!1})}}},Q=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"search flex-column"},[s("div",{staticClass:"search-form flex-column",class:{center:!e.results}},[s("form",{staticClass:"theme-mid shadow flex-row",on:{submit:function(t){t.preventDefault(),e.search(t)}}},[s("div",{staticClass:"flex-row flex-one align-center"},[e._m(0),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.query,expression:"query"}],staticClass:"hi-bottom flex-one",attrs:{name:"search",keyup:e.search,placeholder:"search",autofocus:""},domProps:{value:e.query},on:{input:function(t){t.target.composing||(e.query=t.target.value)}}})]),e._v(" "),e.results?s("div",{staticClass:"filter flex-row flex-one align-center"},[e._m(1),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.filter,expression:"filter"}],staticClass:"hi-bottom flex-one",attrs:{name:"filter",placeholder:"filter"},domProps:{value:e.filter},on:{input:function(t){t.target.composing||(e.filter=t.target.value)}}})]):e._e()])]),e._v(" "),e.results?s("div",{staticClass:"results flex-one flex-row",class:{blur:e.loading}},[s("div",{staticClass:"flex-one flex-column"},[s("p",{staticClass:"title back-orange shadow"},[e._v(e._s(e.results.length)+" verses")]),e._v(" "),s("div",{staticClass:"flex-one substance"},e._l(e.filteredResults,function(t){return s("div",{staticClass:"verse theme-mid shadow"},[s("span",{staticClass:"reference callout-light alt"},[e._v(e._s(t.book_name)+" "+e._s(t.chapter_id)+":"+e._s(t.verse_id))]),e._v(" "),s("span",{staticClass:"verse-text",domProps:{innerHTML:e._s(e.highlightQuery(t.verse_text))}})])}))]),e._v(" "),e.synResults?s("div",{staticClass:"synonyms flex-one flex-column",class:{faded:e.loadingSynonyms}},[s("p",{staticClass:"title back-red shadow"},[e._v(e._s(e.synonyms.length)+" synonyms, "+e._s(e.synResults.length)+" verses")]),e._v(" "),s("div",{staticClass:"flex-one substance"},e._l(e.filteredSynResults,function(t){return s("div",{staticClass:"verse theme-mid shadow"},[s("span",{staticClass:"reference callout-light alt"},[e._v(e._s(t.book_name)+" "+e._s(t.chapter_id)+":"+e._s(t.verse_id))]),e._v(" "),s("span",{staticClass:"verse-text",domProps:{innerHTML:e._s(e.highlightSyns(t.verse_text))}})])}))]):e._e()]):e._e(),e._v(" "),e.loading?s("div",{staticClass:"loading"},[s("i",{staticClass:"fa fa-circle-o-notch fa-spin fa-3x green"})]):e._e()])},j=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("button",{staticClass:"callout-light",attrs:{type:"submit"}},[s("i",{staticClass:"fa fa-search"})])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("label",{staticClass:"muted",attrs:{for:"filter"}},[s("i",{staticClass:"fa fa-filter blue"})])}],q={render:Q,staticRenderFns:j},F=q,D=s("VU/8"),M=a,N=D($,F,!1,M,null,null),O=N.exports,U=s("Dd8w"),P=s.n(U),H=s("NYxO"),L={name:"TextDump",data:function(){return{text:""}},methods:P()({},Object(H.b)(["setCrossReferences"]),{update:function(e){this.text=e},fetchCrossReferences:function(){var e=this;w.fetchCrossReferences(this.text).then(function(t){e.setCrossReferences(t)})}})},V=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"flex-column text-dump"},[s("div",{staticClass:"text-input theme-mid flex-one shadow",attrs:{contenteditable:"true"},on:{input:function(t){e.update(t.target.innerText)}}}),e._v(" "),s("button",{staticClass:"callout-light shadow-long",on:{click:e.fetchCrossReferences}},[e._v("submit")])])},z=[],A={render:V,staticRenderFns:z},G=A,I=s("VU/8"),K=i,W=I(L,G,!1,K,"data-v-30cd58f2",null),J=W.exports,Y=s("gRE1"),B=s.n(Y),X={name:"CrossReferences",data:function(){return{verses:[]}},computed:P()({},Object(H.c)(["crossReferences"])),watch:{crossReferences:function(){var e=this,t=[];B()(this.crossReferences).forEach(function(e){t=t.concat(e)}),w.fetchTexts(t).then(function(t){e.verses=t})}},methods:{formatted:function(e){return e},verseText:function(e){if(this.verses&&this.verses.length){var t=e.split("-"),s=this.verses.find(function(e){return e.start_verse_id.includes(t[0])&&(2!==t.length||e.end_verse_id.includes(t[1]))});return s?s.text:void 0}}}},Z=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"cross-references"},e._l(e.crossReferences,function(t,n){return s("div",{staticClass:"hi-bottom topic-group theme-mid"},[s("p",{staticClass:"topic callout-light"},[e._v(e._s(n))]),e._v(" "),e._l(t,function(t){return s("div",{staticClass:"verse hi-bottom"},[s("p",{staticClass:"verse-ref"},[e._v(e._s(e.formatted(t[0])))]),e._v(" "),s("transition",{attrs:{name:"fade"}},[s("div",{staticClass:"verse-text",domProps:{innerHTML:e._s(e.verseText(t[0]))}})])],1)})],2)}))},ee=[],te={render:Z,staticRenderFns:ee},se=te,ne=s("VU/8"),re=o,ae=ne(X,se,!1,re,"data-v-775ebcb8",null),ie=ae.exports,oe={name:"TextCrossReference",components:{TextDump:J,CrossReferences:ie}},ce=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"vfull flex-row"},[s("text-dump",{staticClass:"flex-one"}),e._v(" "),s("cross-references",{staticClass:"theme-mid shadow"})],1)},le=[],ue={render:ce,staticRenderFns:le},fe=ue,de=s("VU/8"),he=c,ve=de(oe,fe,!1,he,"data-v-9e63360e",null),me=ve.exports;l.a.use(x.a);var pe=new x.a({routes:[{path:"/",name:"Search",component:O},{path:"/cross-reference",name:"TextCrossReference",component:me}]});l.a.use(H.a);var _e={crossReferences:{}},ge={crossReferences:function(e){return e.crossReferences}},xe={setCrossReferences:function(e,t){(0,e.commit)("SET_CROSS_REFERENCES",t)}},ye={SET_CROSS_REFERENCES:function(e,t){e.crossReferences=t}},Ce=new H.a.Store({state:_e,getters:ge,mutations:ye,actions:xe});l.a.config.productionTip=!1,new l.a({el:"#app",store:Ce,router:pe,template:"<App/>",components:{App:g}})},ffal:function(e,t){},oQxR:function(e,t){},v0mG:function(e,t){},v6p1:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.20ca76b0231433d7ca7c.js.map